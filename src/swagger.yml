openapi: 3.0.0
info:
  title: "Cinema-app"
  description: "cinema-app for course-work"
  version: 0.0.1
servers:
  - url: "/api"
components:
  schemas:
    film:
      type: "object"
      required:
        - name
      properties:
        name:
          type: "string"
    filmsession:
      type: "object"
      required:
        - film
      properties:
        film: 
          $ref: "#components/schemas/film"
        date:
          type: "string"
    order:
      type: "object"
      required:
        - customer
      properties:
        sessions:
          type: "array"
          items:
            $ref: "#components/schemas/filmsession"
    customer:
      type: "object"
      required:
        - first_name
        - last_name
      properties:
        first_name:
          type: "string"
        last_name: 
          type: "string"
        middle_name: 
          type: "string"
  parameters:
    film_id:
      name: "film_id"
      description: "Film id"
      in: path
      required: True
      schema:
        type: "integer"
    filmsession_id:
      name: "filmsession_id"
      description: "Filmsession id"
      in: path
      required: True
      schema:
        type: "integer"
    order_id:
      name: "order_id"
      description: "Order id"
      in: path
      required: True
      schema:
        type: "integer"
    customer_id:
      name: "customer_id"
      description: "Customer id"
      in: path
      required: True
      schema:
        type: "integer"
paths:
  /films:
    get:
      operationId: "controllers.FilmsController.read_all"
      tags:
        - "films"
      summary: "Read the list of films"
      responses:
        "200":
          description: "Success"
  /films/{film_id}:
    get:
      operationId: "controllers.FilmsController.read_one"
      tags:
        - "films"
      summary: "Read one film"
      parameters:
        - $ref: "#components/parameters/film_id"
      responses:
        "200":
          description: "Success"
  /filmsessions:
    get:
      operationId: "controllers.FilmSessionsController.read_all"
      tags:
        - "filmSessions"
      summary: "Read the list of sessions"
      responses:
        "200":
          description: "Success"
  /filmsessions/{filmsession_id}:
    get:
      operationId: "controllers.FilmSessionsController.read_one"
      tags:
        - "filmSessions"
      summary: "Read one session"
      parameters:
        - $ref: "#components/parameters/filmsession_id"
      responses:
        "200":
          description: "Success"
  /orders:
    get:
      operationId: "controllers.OrdersController.read_all"
      tags:
        - "orders"
      summary: "Read the list of orders"
      responses:
        "200":
          description: "Success"
  /orders/{order_id}:
    get:
      operationId: "controllers.OrdersController.read_one"
      tags:
        - "orders"
      summary: "Read one order"
      parameters:
        - $ref: "#components/parameters/order_id"
      responses:
        "200":
          description: "Success"
  /customers:
    get:
      operationId: "controllers.CustomersController.read_all"
      tags:
        - "customers"
      summary: "Read the list of customers"
      responses:
        "200":
          description: "Success"
    post:
      operationId: "controllers.CustomersController.create"
      tags:
        - "customers"
      summary: "Create a customer"
      requestBody:
        description: "Customer to create"
        required: True
        content:
          application/json:
            schema:
              x-body-name: "customer"
              $ref: "#/components/schemas/customer"
      responses:
        "201":
          description: "Successfully created customer"
  /customers/{customer_id}:
    get:
      operationId: "controllers.CustomersController.read_one"
      tags:
        - "customers"
      summary: "Read one customer"
      parameters:
        - $ref: "#components/parameters/customer_id"
      responses:
        "200":
          description: "Success"
